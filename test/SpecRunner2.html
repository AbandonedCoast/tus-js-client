<!DOCTYPE html>
<html>
<head>
  <script>window.jasmine={getJSReport:function(){return null}}</script>
  <meta charset="utf-8">
  <title>Jasmine Spec Runner</title>

  <script>
  window.avail = "";

  avail += "jasmine" in window ? "#" : "-";
  avail += "jasmine" in window && jasmine.getJSReport ? "#" : "-";
  avail += " ";

  window.aI = setInterval(function() {
    avail += "jasmine" in window ? "#" : "-";
    avail += ("jasmine" in window && jasmine.getJSReport) ? "#" : "-";
    avail += " ";
    console.log("jasmine" in window && jasmine.getJSReport)


  }, 10);
  </script>

  <!-- Sauce Labs, Selenium or Selendroid somehow loses the getJSReport function
  which causes an error (Cannot call method 'getJSReport' of undefined) if they
  try to fetch the test results (using 'return window.jasmine.getJSReport()').
  This only happens in Android 4.X emulators and not other browser.
  I have no idea why, but defining the function manually after creating a
  JSReporter2 solves this issue. -->
  <script>
    /*window.jasmine = {};
    window.jasmine.getJSReport = function() {
      // JSReporter2 will store the test results in this global variable.
      if("jasmine" in window && jasmine.jsReport) {
        return jasmine.jsReport;
      }

      // Returning null is interpreted as if no results are yet available
      // and they will be fetched again after a small timeout
      return null;
    };*/
  </script>

  <link href="../node_modules/jasmine-core/images/jasmine_favicon.png" rel="shortcut icon" type="image/png">
  <link href="../node_modules/jasmine-core/lib/jasmine-core/jasmine.css" rel="stylesheet">

  <script src="../node_modules/jasmine-core/lib/jasmine-core/jasmine.js"></script>
  <script src="../node_modules/jasmine-core/lib/jasmine-core/jasmine-html.js"></script>
  <script src="../node_modules/jasmine-core/lib/jasmine-core/boot.js"></script>
  <script>window.jasmine.getJSReport=function(){return null}</script>
  <script src="../node_modules/jasmine-core/lib/console/console.js"></script>
  <script src="../node_modules/jasmine-ajax/lib/mock-ajax.js"></script>

  <!-- The JSReporter will allow SauceLabs to automatically extract the tests'
  result, evaluate them and present them in their dashboard, see
  https://wiki.saucelabs.com/display/DOCS/Reporting+JavaScript+Unit+Test+Results+to+Sauce+Labs+Using+Jasmine -->
  <script src="http://rawgit.com/detro/jasmine-jsreporter/master/jasmine-jsreporter.js"></script>
  <script>jasmine.getEnv().addReporter(new jasmine.JSReporter2())</script>

  <script>
    /*window.jasmine = window.jasmine || {};
    window.jasmine.getJSReport = function() {
      // JSReporter2 will store the test results in this global variable.
      if("jasmine" in window && jasmine.jsReport) {
        return jasmine.jsReport;
      }

      // Returning null is interpreted as if no results are yet available
      // and they will be fetched again after a small timeout
      return null;
    };*/
  </script>

  <!-- include source files here... -->
  <script src="../dist/tus.js"></script>

  <!-- include spec files here... -->
  <script src="spec/helpers/browser/fakeBlob.js"></script>
  <script src="spec/upload.js"></script>
</head>

<body>
  <div id="out">h</div>
  <script>document.getElementById("out").innerHTML=avail;setTimeout(function(){clearInterval(aI)},1000)</script>
</body>
</html>
